<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_101) on Wed Aug 10 19:00:38 MDT 2016 -->
<title>KRATool (pki-javadoc)</title>
<meta name="date" content="2016-08-10">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="KRATool (pki-javadoc)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/KRATool.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/netscape/cmstools/HttpClient.html" title="class in com.netscape.cmstools"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/netscape/cmstools/OCSPClient.html" title="class in com.netscape.cmstools"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/netscape/cmstools/KRATool.html" target="_top">Frames</a></li>
<li><a href="KRATool.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.netscape.cmstools</div>
<h2 title="Class KRATool" class="title">Class KRATool</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.netscape.cmstools.KRATool</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">KRATool</span>
extends java.lang.Object</pre>
<div class="block">The KRATool class is a utility program designed to operate on an LDIF file
 to perform one or more of the following tasks:

 <PRE>
     (A) Use a new storage key (e. g. - a 2048-bit key to replace a
         1024-bit key) to rewrap the existing triple DES symmetric key
         that was used to wrap a user's private key.

         STARTING INVENTORY:

             (1) a KRATOOL configuration file containing KRA LDIF record
                 types and the processing status of their associated fields

             (2) an LDIF file containing 'exported' KRA data
                 (referred to as the "source" KRA)

                 NOTE:  If this LDIF file contains data that was originally
                        from a KRA instance that was prior to RHCS 8, it
                        must have previously undergone the appropriate
                        migration steps.

             (3) the NSS security databases (e. g. - cert8.db, key3.db,
                 and secmod.db) associated with the data contained in
                 the source LDIF file

                 NOTE:  If the storage key was located on an HSM, then the
                        HSM must be available to the machine on which the
                        KRATool is being executed (since the RSA private
                        storage key is required for unwrapping the
                        symmetric triple DES key).  Additionally, a
                        password may be required to unlock access to
                        this key (e. g. - which may be located in
                        the source KRA's 'password.conf' file).

             (4) a file containing the ASCII BASE-64 storage certificate
                 from the KRA instance for which the output LDIF file is
                 intended (referred to as the "target")

         ENDING INVENTORY:

             (1) all items listed in the STARTING INVENTORY (unchanged)

             (2) a log file containing information suitable for audit
                 purposes

             (3) an LDIF file containing the revised data suitable for
                 'import' into a new KRA (referred to as the "target" KRA)

         KRATool PARAMETERS:

             (1) the name of the KRATOOL configuration file containing
                 KRA LDIF record types and the processing status of their
                 associated fields

             (2) the name of the input LDIF file containing data which was
                 'exported' from the source KRA instance

             (3) the name of the output LDIF file intended to contain the
                 revised data suitable for 'import' to a target KRA instance

             (4) the name of the log file that may be used for auditing
                 purposes

             (5) the path to the security databases that were used by
                 the source KRA instance

             (6) the name of the token that was used by
                 the source KRA instance

             (7) the name of the storage certificate that was used by
                 the source KRA instance

             (8) the name of the file containing the ASCII BASE-64 storage
                 certificate from the target KRA instance for which the
                 output LDIF file is intended

             (9) OPTIONALLY, the name of a file which ONLY contains the
                 password needed to access the source KRA instance's
                 security databases

            (10) OPTIONALLY, choose to change the specified source KRA naming
                 context to the specified target KRA naming context

            (11) OPTIONALLY, choose to ONLY process CA enrollment requests,
                 CA recovery requests, CA key records, TPS netkeyKeygen
                 enrollment requests, TPS recovery requests, and
                 TPS key records

         DATA FIELDS AFFECTED (using default config file values):

             (1) CA KRA enrollment request

                 (a) dateOfModify
                 (b) extdata-requestnotes

             (2) CA KRA key record

                 (a) dateOfModify
                 (b) privateKeyData

             (3) CA KRA recovery request

                 (a) dateOfModify
                 (b) extdata-requestnotes (NEW)

             (4) TPS KRA netkeyKeygen (enrollment) request

                 (a) dateOfModify
                 (b) extdata-requestnotes (NEW)

             (5) TPS KRA key record

                 (a) dateOfModify
                 (b) privateKeyData

             (6) TPS KRA recovery request

                 (a) dateOfModify
                 (b) extdata-requestnotes (NEW)

     (B) Specify an ID offset to append to existing numeric data
         (e. g. - to renumber data for use in KRA consolidation efforts).

         STARTING INVENTORY:

             (1) a KRATOOL configuration file containing KRA LDIF record
                 types and the processing status of their associated fields

             (2) an LDIF file containing 'exported' KRA data
                 (referred to as the "source" KRA)

                 NOTE:  If this LDIF file contains data that was originally
                        from a KRA instance that was prior to RHCS 8, it
                        must have previously undergone the appropriate
                        migration steps.

         ENDING INVENTORY:

             (1) all items listed in the STARTING INVENTORY (unchanged)

             (2) a log file containing information suitable for audit
                 purposes

             (3) an LDIF file containing the revised data suitable for
                 'import' into a new KRA (referred to as the "target" KRA)

         KRATool PARAMETERS:

             (1) the name of the KRATOOL configuration file containing
                 KRA LDIF record types and the processing status of their
                 associated fields

             (2) the name of the input LDIF file containing data which was
                 'exported' from the source KRA instance

             (3) the name of the output LDIF file intended to contain the
                 revised data suitable for 'import' to a target KRA instance

             (4) the name of the log file that may be used for auditing
                 purposes

             (5) a large numeric ID offset (mask) to be appended to existing
                 numeric data in the source KRA instance's LDIF file

             (6) OPTIONALLY, choose to change the specified source KRA naming
                 context to the specified target KRA naming context

             (7) OPTIONALLY, choose to ONLY process CA enrollment requests,
                 CA recovery requests, CA key records, TPS netkeyKeygen
                 enrollment requests, TPS recovery requests, and
                 TPS key records

         DATA FIELDS AFFECTED (using default config file values):

             (1) CA KRA enrollment request

                 (a) cn
                 (b) dateOfModify
                 (c) extdata-keyrecord
                 (d) extdata-requestnotes
                 (e) requestId

             (2) CA KRA key record

                 (a) cn
                 (b) dateOfModify
                 (c) serialno

             (3) CA KRA recovery request

                 (a) cn
                 (b) dateOfModify
                 (c) extdata-requestid
                 (d) extdata-requestnotes (NEW)
                 (e) extdata-serialnumber
                 (f) requestId

             (4) TPS KRA netkeyKeygen (enrollment) request

                 (a) cn
                 (b) dateOfModify
                 (c) extdata-keyrecord
                 (d) extdata-requestid
                 (e) extdata-requestnotes (NEW)
                 (f) requestId

             (5) TPS KRA key record

                 (a) cn
                 (b) dateOfModify
                 (c) serialno

             (6) TPS KRA recovery request

                 (a) cn
                 (b) dateOfModify
                 (c) extdata-requestid
                 (d) extdata-requestnotes (NEW)
                 (e) extdata-serialnumber
                 (f) requestId

     (C) Specify an ID offset to be removed from existing numeric data
         (e. g. - to undo renumbering used in KRA consolidation efforts).

         STARTING INVENTORY:

             (1) a KRATOOL configuration file containing KRA LDIF record
                 types and the processing status of their associated fields

             (2) an LDIF file containing 'exported' KRA data
                 (referred to as the "source" KRA)

                 NOTE:  If this LDIF file contains data that was originally
                        from a KRA instance that was prior to RHCS 8, it
                        must have previously undergone the appropriate
                        migration steps.

         ENDING INVENTORY:

             (1) all items listed in the STARTING INVENTORY (unchanged)

             (2) a log file containing information suitable for audit
                 purposes

             (3) an LDIF file containing the revised data suitable for
                 'import' into a new KRA (referred to as the "target" KRA)

         KRATool PARAMETERS:

             (1) the name of the KRATOOL configuration file containing
                 KRA LDIF record types and the processing status of their
                 associated fields

             (2) the name of the input LDIF file containing data which was
                 'exported' from the source KRA instance

             (3) the name of the output LDIF file intended to contain the
                 revised data suitable for 'import' to a target KRA instance

             (4) the name of the log file that may be used for auditing
                 purposes

             (5) a large numeric ID offset (mask) to be removed from existing
                 numeric data in the source KRA instance's LDIF file

             (6) OPTIONALLY, choose to change the specified source KRA naming
                 context to the specified target KRA naming context

             (7) OPTIONALLY, choose to ONLY process CA enrollment requests,
                 CA recovery requests, CA key records, TPS netkeyKeygen
                 enrollment requests, TPS recovery requests, and
                 TPS key records

         DATA FIELDS AFFECTED (using default config file values):

             (1) CA KRA enrollment request

                 (a) cn
                 (b) dateOfModify
                 (c) extdata-keyrecord
                 (d) extdata-requestnotes
                 (e) requestId

             (2) CA KRA key record

                 (a) cn
                 (b) dateOfModify
                 (c) serialno

             (3) CA KRA recovery request

                 (a) cn
                 (b) dateOfModify
                 (c) extdata-requestid
                 (d) extdata-requestnotes (NEW)
                 (e) extdata-serialnumber
                 (f) requestId

             (4) TPS KRA netkeyKeygen (enrollment) request

                 (a) cn
                 (b) dateOfModify
                 (c) extdata-keyrecord
                 (d) extdata-requestid
                 (e) extdata-requestnotes (NEW)
                 (f) requestId

             (5) TPS KRA key record

                 (a) cn
                 (b) dateOfModify
                 (c) serialno

             (6) TPS KRA recovery request

                 (a) cn
                 (b) dateOfModify
                 (c) extdata-requestid
                 (d) extdata-requestnotes (NEW)
                 (e) extdata-serialnumber
                 (f) requestId

 </PRE>

 <P>
 KRATool may be invoked as follows:

 <PRE>

    KRATool
    -kratool_config_file &lt;path + kratool config file&gt;
    -source_ldif_file &lt;path + source ldif file&gt;
    -target_ldif_file &lt;path + target ldif file&gt;
    -log_file &lt;path + log file&gt;
    [-source_pki_security_database_path &lt;path to PKI source database&gt;]
    [-source_storage_token_name '&lt;source token&gt;']
    [-source_storage_certificate_nickname '&lt;source nickname&gt;']
    [-target_storage_certificate_file &lt;path to target certificate file&gt;]
    [-source_pki_security_database_pwdfile &lt;path to PKI password file&gt;]
    [-append_id_offset &lt;numeric offset&gt;]
    [-remove_id_offset &lt;numeric offset&gt;]
    [-source_kra_naming_context '&lt;original source KRA naming context&gt;']
    [-target_kra_naming_context '&lt;renamed target KRA naming context&gt;']
    [-process_requests_and_key_records_only]

    where the following options are 'Mandatory':

    -kratool_config_file &lt;path + kratool config file&gt;
    -source_ldif_file &lt;path + source ldif file&gt;
    -target_ldif_file &lt;path + target ldif file&gt;
    -log_file &lt;path + log file&gt;

    AND at least ONE of the following are a 'Mandatory' set of options:

        (a) options for using a new storage key for rewrapping:

            [-source_pki_security_database_path
             &lt;path to PKI source database&gt;]
            [-source_storage_token_name '&lt;source token&gt;']
            [-source_storage_certificate_nickname '&lt;source nickname&gt;']
            [-target_storage_certificate_file
             &lt;path to target certificate file&gt;]

            AND OPTIONALLY, specify the name of a file which ONLY contains
            the password needed to access the source KRA instance's
            security databases:

            [-source_pki_security_database_pwdfile
             &lt;path to PKI password file&gt;]

            AND OPTIONALLY, rename source KRA naming context --> target
            KRA naming context:

            [-source_kra_naming_context '&lt;source KRA naming context&gt;']
            [-target_kra_naming_context '&lt;target KRA naming context&gt;']

            AND OPTIONALLY, process requests and key records ONLY:

            [-process_requests_and_key_records_only]

        (b) option for appending the specified numeric ID offset
            to existing numerical data:

            [-append_id_offset &lt;numeric offset&gt;]

            AND OPTIONALLY, rename source KRA naming context --> target
            KRA naming context:

            [-source_kra_naming_context '&lt;source KRA naming context&gt;']
            [-target_kra_naming_context '&lt;target KRA naming context&gt;']

            AND OPTIONALLY, process requests and key records ONLY:

            [-process_requests_and_key_records_only]

        (c) option for removing the specified numeric ID offset
            from existing numerical data:

            AND OPTIONALLY, rename source KRA naming context --> target
            KRA naming context:

            [-source_kra_naming_context '&lt;source KRA naming context&gt;']
            [-target_kra_naming_context '&lt;target KRA naming context&gt;']

            [-remove_id_offset &lt;numeric offset&gt;]

            AND OPTIONALLY, process requests and key records ONLY:

            [-process_requests_and_key_records_only]

        (d) (a) rewrap AND (b) append ID offset
            [AND OPTIONALLY, rename source KRA naming context --> target
            KRA naming context]
            [AND OPTIONALLY process requests and key records ONLY]

        (e) (a) rewrap AND (c) remove ID offset
            [AND OPTIONALLY, rename source KRA naming context --> target
            KRA naming context]
            [AND OPTIONALLY process requests and key records ONLY]

        NOTE:  Options (b) and (c) are mutually exclusive!

 </PRE></div>
<dl>
<dt><span class="simpleTagLabel">Version:</span></dt>
<dd>$Revision$, $Date$</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>mharmsen</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/netscape/cmstools/KRATool.html#KRATool--">KRATool</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/netscape/cmstools/KRATool.html#main-java.lang.String:A-">main</a></span>(java.lang.String[]&nbsp;args)</code>
<div class="block">The main KRATool method.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="KRATool--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>KRATool</h4>
<pre>public&nbsp;KRATool()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="main-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;args)</pre>
<div class="block">The main KRATool method.
 <P></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>args</code> - KRATool options</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/KRATool.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/netscape/cmstools/HttpClient.html" title="class in com.netscape.cmstools"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/netscape/cmstools/OCSPClient.html" title="class in com.netscape.cmstools"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/netscape/cmstools/KRATool.html" target="_top">Frames</a></li>
<li><a href="KRATool.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
